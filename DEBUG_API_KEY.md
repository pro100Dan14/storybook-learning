# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å API –∫–ª—é—á–æ–º

## –ü—Ä–æ–±–ª–µ–º–∞
–ö–ª—é—á –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, –Ω–æ –≤—Å–µ —Ä–∞–≤–Ω–æ –æ—à–∏–±–∫–∞ "API key not valid".

–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
1. .env —Ñ–∞–π–ª –Ω–µ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
3. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –≤–∏–¥–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π .env

---

## –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ .env —Ñ–∞–π–ª–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
ssh root@162.120.18.86
cd /opt/storybook-learning
cat .env | grep GEMINI_API_KEY
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- –ö–ª—é—á –µ—Å—Ç—å?
- –ù–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤?
- –ö–ª—é—á –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `AIza`?

---

## –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
docker compose exec backend env | grep GEMINI
```

**–ò–õ–ò:**

```bash
docker compose exec backend printenv GEMINI_API_KEY
```

**–ï—Å–ª–∏ –∫–ª—é—á –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è** - –∑–Ω–∞—á–∏—Ç Docker –Ω–µ –≤–∏–¥–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏–∑ .env!

---

## –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∫ docker-compose –∑–∞–≥—Ä—É–∂–∞–µ—Ç .env

–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤ docker-compose.yml - —Ç–∞–º –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:

```yaml
environment:
  - GEMINI_API_KEY=${GEMINI_API_KEY:-}
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ docker-compose –¥–æ–ª–∂–µ–Ω —á–∏—Ç–∞—Ç—å .env —Ñ–∞–π–ª –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞.

---

## –†–µ—à–µ–Ω–∏–µ: –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ .env –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –º–µ—Å—Ç–µ

.env —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ `/opt/storybook-learning/.env` (–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞, –≥–¥–µ docker-compose.yml)

---

## –†–µ—à–µ–Ω–∏–µ 2: –Ø–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ docker-compose

–ï—Å–ª–∏ .env –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é –≤ docker-compose.yml:

```yaml
environment:
  - GEMINI_API_KEY=–≤–∞—à_–∫–ª—é—á_–∑–¥–µ—Å—å
```

–ù–æ —ç—Ç–æ –º–µ–Ω–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ.

---

## –†–µ—à–µ–Ω–∏–µ 3: –ü–µ—Ä–µ–¥–∞—Ç—å —á–µ—Ä–µ–∑ environment –≤ docker-compose

–í docker-compose.yml –¥–æ–±–∞–≤—å—Ç–µ —è–≤–Ω—É—é —Å—Å—ã–ª–∫—É –Ω–∞ .env:

```yaml
env_file:
  - .env
```

–ù–æ –æ–±—ã—á–Ω–æ docker-compose –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–∏—Ç–∞–µ—Ç .env –∏–∑ –∫–æ—Ä–Ω—è.





