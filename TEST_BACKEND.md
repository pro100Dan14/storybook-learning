# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∫–µ–Ω–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## üåê –í–∞—à –±–µ–∫–µ–Ω–¥ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
**http://162.120.18.86:8787**

---

## 1Ô∏è‚É£ –ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (—á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä)

### Health Check
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://162.120.18.86:8787/health
```

**–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å:**
```json
{"ok":true,"requestId":"..."}
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–µ–∫–µ–Ω–¥–∞
```
http://162.120.18.86:8787/api/debug/config
```

–ò–ª–∏:
```
http://162.120.18.86:8787/debug/config
```

**–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:**
- –í–µ—Ä—Å–∏—é –±–µ–∫–µ–Ω–¥–∞
- –û–∫—Ä—É–∂–µ–Ω–∏–µ (production)
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

---

## 2Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ curl (—Å —Å–µ—Ä–≤–µ—Ä–∞)

### Health Check
```bash
ssh root@162.120.18.86
curl http://localhost:8787/health
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```bash
curl http://localhost:8787/api/debug/config
```

---

## 3Ô∏è‚É£ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–Ω–∏–≥–∏ (–æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)

### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ curl (JSON)

**–ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:**

–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Ñ–æ—Ç–æ –≤ base64. –ù—É–∂–Ω–æ –∏–º–µ—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –≤ base64.

–î–ª—è Windows PowerShell:
```powershell
# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º —Ñ–æ—Ç–æ –≤ base64
$photoBytes = [System.IO.File]::ReadAllBytes("C:\–ø—É—Ç—å\–∫\—Ñ–æ—Ç–æ.jpg")
$photoBase64 = [System.Convert]::ToBase64String($photoBytes)

# –î–µ–ª–∞–µ–º –∑–∞–ø—Ä–æ—Å (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_BASE64_STRING –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—à–µ)
curl -X POST http://162.120.18.86:8787/api/book `
  -H "Content-Type: application/json" `
  -d "{\"name\":\"–ì–µ—Ä–æ–π\",\"theme\":\"–≤–æ–ª—à–µ–±–Ω—ã–π –ª–µ—Å\",\"pages\":4,\"photoBase64\":\"YOUR_BASE64_STRING\",\"photoMimeType\":\"image/jpeg\"}"
```

### –í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ curl (Multipart Form - –ø—Ä–æ—â–µ!)

**–ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:**

```bash
curl -X POST http://162.120.18.86:8787/api/book \
  -F "photo=@C:\–ø—É—Ç—å\–∫\–≤–∞—à–µ–º—É\—Ñ–æ—Ç–æ.jpg" \
  -F "name=–ì–µ—Ä–æ–π" \
  -F "theme=–≤–æ–ª—à–µ–±–Ω—ã–π –ª–µ—Å" \
  -F "pages=4"
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `name` - –∏–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "–ì–µ—Ä–æ–π")
- `theme` - —Ç–µ–º–∞ –∏—Å—Ç–æ—Ä–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "–≤–æ–ª—à–µ–±–Ω—ã–π –ª–µ—Å")
- `pages` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü (1-8, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 4)
- `photo` - —Ñ–∞–π–ª —Å —Ñ–æ—Ç–æ

**–û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:**
```json
{
  "ok": true,
  "bookId": "...",
  "pages": [...],
  ...
}
```

---

## 4Ô∏è‚É£ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–Ω–∏–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, –≤—ã –ø–æ–ª—É—á–∏—Ç–µ `bookId`. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:

### HTML –æ—Ç—á–µ—Ç (–≤ –±—Ä–∞—É–∑–µ—Ä–µ)
```
http://162.120.18.86:8787/jobs/{bookId}/report.html
```

**–ü—Ä–∏–º–µ—Ä:**
```
http://162.120.18.86:8787/jobs/abc123/report.html
```

### JSON –æ—Ç—á–µ—Ç
```
http://162.120.18.86:8787/jobs/{bookId}/report.json
```

### –§–æ—Ç–æ –≥–µ—Ä–æ—è
```
http://162.120.18.86:8787/jobs/{bookId}/hero.jpg
```

---

## 5Ô∏è‚É£ –û—Ç–ª–∞–¥–∫–∞ (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –±–µ–∫–µ–Ω–¥–∞
```bash
ssh root@162.120.18.86
cd /opt/storybook-learning
docker compose logs -f backend
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```bash
docker compose ps
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–µ–∫–µ–Ω–¥–∞
```bash
docker compose restart backend
```

---

## 6Ô∏è‚É£ –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç (–±–µ–∑ —Ñ–æ—Ç–æ)

–ú–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ endpoints:

### Identity endpoint
```bash
curl -X POST http://162.120.18.86:8787/api/identity \
  -H "Content-Type: application/json" \
  -d '{"photoBase64":"test","photoMimeType":"image/jpeg"}'
```

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ health:**
   ```
   http://162.120.18.86:8787/health
   ```

2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–Ω–∏–≥–∏:**
   ```bash
   curl -X POST http://162.120.18.86:8787/api/book \
     -F "photo=@—Ñ–æ—Ç–æ.jpg" \
     -F "name=–ê–ª–µ–∫—Å–µ–π" \
     -F "theme=–∫–æ—Å–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ" \
     -F "pages=4"
   ```

3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ bookId –∏–∑ –æ—Ç–≤–µ—Ç–∞**

4. **–ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**
   ```
   http://162.120.18.86:8787/jobs/{bookId}/report.html
   ```

---

## ‚úÖ –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

–ï—Å–ª–∏ health endpoint –æ—Ç–≤–µ—á–∞–µ—Ç –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–Ω–∏–≥–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç - –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!

